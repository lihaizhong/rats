[插件](https://webpack.js.org/concepts/plugins/)

# 插件

**插件**是webpack的骨干。webpack自身的建立就是在相同的插件系统之上。

他们的服务目标是做任何装载器不能做的事情。

## 剖析

一个webpack**插件**是一个有`apply`属性的JavaScript对象。这个`apply`属性被称为webpack的编译器，提供了整个编译生命周期的访问。

**ConsoleLogOnBuildWebpackPlugin.js**

```
function ConsoleLogOnBuildWebpackPlugin() {

}

ConsoleLogOnBuildWebpackPlugin.prototype.apply = function(compiler) {
    compiler.plugins('run', function (compiler, callback) {
        console.log("The webpack build process is starting!!!");

        callback();
    });
};
```

## 使用

由于插件可以接受参数/选项，你必须把实例化属性传递给webpack配置的`plugins`属性。

根据你使用webpack的方式，有多种方式可以使用插件。

## 配置

**webpack.config.js**

```
const HtmlWebpackPlugin = require('html-webpack-plugin');
const webpack = require('webpack');
const path = require('path');

const config = {
  entry: './path/to/my/entry/file.js',
  output: {
    filename: 'my-first-webpack.build.js',
    path: path.resolve(__dirname, 'dist')
  },
  module: {
    rules: [
      {
        test: /\.(js|jsx)$/,
        loader: 'babel-loader'
      }
    ]
  },
  plugins: [
    new webpack.optimize.UglifyJsPlugin(),
    new HtmlWebpackPlugin({template: './src/index.html'})
  ]
};

module.exports = config;
```

## Node API

**some-node-script.js**

```
const webpack = require('webpack');
const configuration = require('./webpack.config.js');

let complier = webpack(configuration);

complier.apply(new webpack.ProcessPlugin());

complier.on('run', function(err, stats) {
    // ...
})
```
