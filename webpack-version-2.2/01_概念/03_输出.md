[输出](https://webpack.js.org/concepts/output/)

# 输出

选项影响编译的输出。`output`选项告诉webpack怎样编译文件到磁盘中。注意，当`entry`的入口点有多个时，仅有一个`output`配置是指定的。

如果你用任何哈希（`[hash]`或者`[chunkhash]`），请确保模块具有一致的排序。用`OccurrentOrderPlugin`或者`recordsPath`。

## 使用

webpack中配置`output`属性的最低需求是设置以下两个属性：

你编译文件的首选文件名

你输出文件存放的首选位置（一个绝对位置路径）

**webpack.config.js**

```
const config = {
    filename: 'bundle.js',
    path: '/home/proj/public/assets'
};

module.exports = config;
```

## 选项

你可以通过`output`属性传递一下列表的属性：

### output.chunkFilename

非入口块中的文件名作为`output.path`目录的相对路径

`[id]`通过块的id进行替换。

`[name]`通过块的名称进行替换。（如果块没有没有名称，使用`id`代替）

`[hash]`用编译生成的hash值替换。

`[chunkhash]`通过编译内容块获得的hash值进行替换。

### output.crossOriginLoading

这个选项开启块的跨域加载。

可能的值有：

`[false]`禁止跨域加载

`[anonymous]`开启跨域加载。若使用`anonymous`，证书不会随请求一起发送。

`[use-credentials]`开启跨域加载，并且证书会随请求一起发送。

想要了解更多跨域加载的信息，请前往[MDN](https://developer.mozilla.org/en/docs/Web/HTML/Element/script#attr-crossorigin)

> 默认: false 可以查看[创作库](https://webpack.js.org/guides/author-libraries/) 可以查看[开发者工具](https://webpack.js.org/guides/development/#choosing-a-tool)

### oputput.devtoolLineToLine

为所有模块或者指定模块开启`行到行的映射模式`。`行到行的映射模式`是指，生成资源的每一行都与原始文件的每一行相对应。这是一种性能优化的方式。如果你想要你的代码性能更好，并且你想要你输入的每一行都能对应生成的每一行时，你可以用它。

`true`在所有模块中开启它（不推荐）

用一个包含`{test, include, exclude}`属性的对象来配置等同于使用`module.loaders`开启指定文件是一样的。

> 默认： false

### output.filename

每一个输出的文件在磁盘上都有指定的名字。你不能在这里指定绝对路径。`output.path`选项决定文件在磁盘中的位置。`filename`仅仅是作为单个文件的名称。

**单入口**

```
{
    entry: './src/app.js',
    output: {
      filename: 'bundle.js',
      path: __dirname + '/build'
    }
  }

  // writes to disk: ./build/bundle.js
```

**multiple entries**

如果你的配置创建多个块（使用多入口或者使用了像`CommonChunkPlugin`的插件）时，你应该使用替换的方式来确保每个文件都有独立的名称。

`[name]`用块的名字来替换

`[hash]`用编译生成的hash值替换

`[chunkhash]`用块的hash值来替换

```
{
    entry: {
      app: './src/app.js',
      search: './src/search.js'
    },
    output: {
      filename: '[name].js',
      path: __dirname + '/build'
    }
  }

  // writes to disk: ./build/app.js ./build/search.js
```

### output.hotUpdateChunkFilename

热更新块的文件名。它在`output.path`目录下。

`[id]`用块的id来替换

`[hash]`用编译生成的hash值替换（存储最近一次hash）

> 默认："[id].[hash].hot-update.js"

output.hotUpdateFunction

webpack用于加载异步更新块的JSONP函数

> 默认："webpackHotUpdate"

### output.hotUpdateMainFilename

热更新主文件的文件名。它在`output.path`目录下。

`[hash]`用编译生成的hash值替换。（存储最近一次hash）

> 默认："[hash].hot-update.json"

### output.jsonpFunction

webpack用于加载异步更新块的JSONP函数

一个更短的函数可以减小文件的大小。在单页面中存在多个webpack实例时请使用不同的标识符。

> 默认："webpackJsonp"

### output.library

如果设置，将导出一个库。`output.library`是一个名字。

如果你正在写一个库，并且想要以单文件发布时，你可以使用它。

### output.libraryTarget

哪种格式抛出库：

`"var"` - 通过设置一个变量抛出。`var Library = xxx`（默认）

`"this"` - 通过设置一个`this`的属性抛出。`this["Library"] = xxx`

`"commonjs"` - 通过设置一个`exports`的属性抛出。`exports["Library"] = xxx`

`"commonjs2"` - 通过设置`module.exports`抛出。`module.exports = xxx`

`"amd"` - 按照AMD规范抛出。（可选的名称 -- 通过库选项设置名称）

`"umd"` - 按照AMD，Commonjs2或者作为根的属性抛出。

> 默认："var"

如果`output.library`没有设置，但是`output.libraryTarget`被设置了一个不是`var`的值。抛出对象的每一个属性将被拷贝。（抛出`amd`，`umd` 和 `commonjs2`）。

### output.path

将绝对路径作为输出目录（_必须_）

`[hash]`用编译生成的hash值替换。

**config.js**

```
output: {
    path: '/home/proj/public/assets',
    publicPath: '/assets/'
  }
```

**index.html**

```
<head>
    <link href="/assets/spinner.gif">
  </head>
```

一个更加复杂的使用CDN和hash资源的例子。

**config.js**

```
output: {
    path: '/home/proj/cdn/assets/[hash]',
    publicPath: 'http://cdn.example.com/assets/[hash]/'
  }
```

**注：**在编译时不知道最终的输出文件路径publicPath的情况下，它可以留空并且在入口点文件运行时动态设置。如果在编译时你不知道publicPath，你可以忽略它，在入口点设置**webpack_public_path**。

```
__webpack_public_path__ = myRuntimePublicPath

  // 你的应用程序入口的其他部分
```

### output.sourceMapFilename

JavaScript文件中的SourceMap的文件名。他们在`output.path`的目录。

`[file]`用JavaScript的文件名替换

`[id]`用块的id替换

`[hash]`用编译生成的hash值替换

> 默认："[file].map"
