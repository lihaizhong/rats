[模块解析器](https://webpack.js.org/concepts/module-resolution/)

# 模块解析器

一个解析器是一个库，它通过绝对路径定位本地模块。一个模块可以被要求依赖其他模块：

```
import foo from 'path/to/module'
// or
require('path/to/module')
```

依赖模块可能来自应用程序的代码或者第三方库。解析器帮助webpack寻找相互依赖的模块代码。webpack使用[enhanced-resolve](https://github.com/webpack/enhanced-resolve)解决捆绑模块的文件路径问题。

## webpack的解析器规则

使用`enhanced-resolve`，webpack处理三种文件路径：

### 绝对路径

```
import '/home/me/file';
  'C:\\Users\\me\\file';
```

已经是绝对路径了，不需要其他处理。

### 相对路径

```
import '../src/file1';
import './file2';
```

### 模块路径

```
import 'module';
import 'module/lib/file';
```

`resolve.modules`指定了所有的模块。你可以通过配置`resolve.alias`设置别名。

解析器会检查符合以上规定的路径是都是文件或者目录。如果路径是文件：

- 如果路径具有文件扩展名，文件将直接被绑定。
- 否则，文件扩展名将使用`resolve.extensions`选项来解析，它会告诉浏览器哪些扩展名对于解析器是可接受的。

如果路径是一个目录，将根据以下步骤查找正确的文件：

- 如果目录包含一个`package.json`文件，在`resolve.mainFields`属性指定了一个字段，在`package.json`中的这个字段决定了文件路径。
- 如果没有`package.json`或者关键字段没有返回有效的路径，在`resolve.mainFields`属性指定文件名，看`import/require`是否有匹配的文件。
- 用`resolve.extensions`属性解析是否有相似的文件扩展。

根据你的`target`，webpack会提供合理的默认值

## 解析器的加载器

这与文件解析规则相同。但是`resolveLoader`配置项用来分离加载器的解析规则。

## 缓存

每一个文件系统访问都会被缓存，并行的或者几个相同文件的请求速度会非常快。在监听模式下，修改文件会被移除缓存。如果关闭监听模式，缓存会在每次编译之后清除。

查看[resolve API](https://webpack.js.org/configuration/resolve)了解更多上述提到配置项的信息。
