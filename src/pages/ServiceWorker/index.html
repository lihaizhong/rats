<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <title>ServiceWorker</title>
  <script type="module" src="./index.js"></script>
</head>

<body>
  <header>
    <span>这是一个ServiceWorker测试页面。</span>
    <a href="javascript:location.reload();">重新刷新</a>
  </header>
  <!-- ServiceWorker版本 -->
  <p id="version"></p>
  <!-- ServiceWorker安装消息 -->
  <div id="message-container"></div>
  <!-- 测试图片拦截 -->
  <div>
    <img src="./static/important-notes.png" alt="">
    <img src="./static/sw-events.png" alt="">
    <img src="./static/sw-fetch.png" alt="">
  </div>
  <!-- 测试iframe拦截 -->
  <iframe src="./static/sw-lifecycle.png" frameborder="0" width="600" height="800"></iframe>
  <div>manifest配置</div>
  <div>
    <div>name, short_name</div>
    <div>指定了Web App的名称。short_name其实是该应用的一个简称。一般来说，当没有足够空间展示应用的name时，系统就会使用short_name。可以看到本文的例子中，图书搜索这个应用在桌面上展示的名称就是short_name书查。</div>
  </div>
  <div>
    <div>start_url</div>
    <div>这个属性指定了用户打开该Web App时加载的URL。相对URL会相对于manifest。这里我们指定了start_url为/，访问根目录。</div>
  </div>
  <div>
    <div>display</div>
    <div>
      <p>display控制了应用的显示模式，它有四个值可以选择：fullscreen、standalone、minimal-ui和browser。</p>
      <ol>
        <li>fullscreen：全屏显示，会尽可能将所有的显示区域都占满；</li>
        <li>standalone：独立应用模式，这种模式下打开的应用有自己的启动图标，并且不会有浏览器的地址栏。因此看起来更像一个Native App；</li>
        <li>minimal-ui：与standalone相比，该模式会多出地址栏；</li>
        <li>browser：一般来说，会和正常使用浏览器打开样式一致。</li>
      </ol>
      当然，不同的系统所表现出的具体样式也不完全一样。就像示例中的虚拟按键在fullscreen模式下会默认隐藏。
    </div>
    <div>
      <div>orientation</div>
      <div>控制Web App的方向。设置某些值会具有类似锁屏的效果（禁止旋转），例如例子中的portrait-primary。具体的值包括：any, natural, landscape, landscape-primary, landscape-secondary, portrait, portrait-primary, portrait-secondary。</div>
    </div>
    <div>
      <div>icons， background_color</div>
      <div>
        <p>icons用来指定应用的桌面图标。icons本身是一个数组，每个元素包含三个属性：</p>
        <ol>
          <li>sizes：图标的大小。通过指定大小，系统会选取最合适的图标展示在相应位置上。</li>
          <li>src：图标的文件路径。注意相对路径是相对于manifest。</li>
          <li>type：图标的图片类型。</li>
        </ol>
        需要指出的是，我一直提的“开屏图”其实是背景颜色+图标的展示模式（并不会设置一张所谓的开屏图）。background_color是在应用的样式资源为加载完毕前的默认背景，因此会展示在开屏界面。background_color加上我们刚才定义的icons就组成了Web App打开时的“开屏图”。
      </div>
    </div>
    <div>
      <div>theme_color</div>
      <div>定义应用程序的默认主题颜色。 这有时会影响操作系统显示应用程序的方式（例如，在Android的任务切换器上，主题颜色包围应用程序）。此外，还可以在meta标签中设置theme_color：&lt;meta name="theme-color" content="#5eace0"/&gt;</div>
    </div>
    <div>
      <div>description</div>
      <div>这个字段的含义非常简单，就是一段对该应用的描述。</div>
    </div>
  </div>
</body>

</html>
