<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>组件--作用域插槽</title>
</head>
<body>

<div id="app">
    <div class="parent">
        <child-component>
            <template scope="props">
                <p>hello from parent</p>
                <p>{{ props.text }}</p>
            </template>
        </child-component>

        <my-awesome-list>
            <template slot="item" scope="props">
                <li>{{ props.text }}</li>
            </template>
        </my-awesome-list>

        <keep-alive>
            <!-- 开启keepalive，将切换出去的组件保存在内存中（可以保存它的状态或避免重新渲染） -->
            <component :is="currentView"></component>
        </keep-alive>

        <async-component></async-component>
    </div>
</div>

<script src="https://unpkg.com/vue/dist/vue.js"></script>

<script>
    Vue.component('child-component', {
        template: '<div><slot text="hello from child"></slot></div>'
    })

    Vue.component('my-awesome-list', {
        template: '<ul><slot name="item" v-for="item in items" :text="item.text"></slot></ul>',
        data: function () {
            return {
                items: [
                    {
                        text: 1
                    },
                    {
                        text: 2
                    },
                    {
                        text: 3
                    }
                ]
            }
        }
    })

    Vue.component('async-component', function (resolve, reject) {
        setTimeout(function () {
            resolve({
                template: '<div>我是一个异步加载模块</div>'
            })
        }, 1000);
    })

    var vm = new Vue({
        el: '#app',
        data: {
            currentView: 'home'
        },
        components: {
            home: {
                template: '<p>这是Home页</p>'
            },
            posts: {
                template: '<p>这是Posts页</p>'
            },
            archive: {
                template: '<p>这是Archive页</p>'
            }
        }
    })

    var compsNames = ['home', 'posts', 'archive'];

    setInterval(function () {
        var index = Math.floor(Math.random() * 3);
        vm.currentView = compsNames[index];
    }, 1000);
</script>
</body>
</html>